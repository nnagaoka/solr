#!/usr/bin/env ruby

require "cgi"
require "open-uri"
require "json"
cgi = CGI.new

print("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Frameset//EN\" \"http://www.w3.org/TR/html4/frameset.dtd\">
<html>
  <head>
  <title>検索結果</title>
  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">
</head>")

puts cgi.header("text/html; charset=UTF-8")
print("検索結果<br><br>")
print("\"")


io = open("http://localhost:8983/solr/wikipedia/select?q=#{URI.escape cgi["q"]}&wt=json")
json = io.read
#puts json
data = JSON.load(json)
result = data["response"]["docs"]
result.each do |e|
	puts e["title"]
	print("<br>")
end